<h1 id="Commit-message-format"><a href="#Commit-message-format" class="headerlink" title="Commit message format"></a>Commit message format</h1><p><em>其他语言版本: <a href="CONTRIBUTING.md">English</a>, <a href="CONTRIBUTING.zh-cn.md">简体中文</a>.</em></p>
<h2 id="1-Title-Header"><a href="#1-Title-Header" class="headerlink" title="1. Title (Header)"></a>1. Title (Header)</h2><p><strong>（1）type</strong></p>
<p><code>type</code> 用于说明 commit 的类别，只允许使用下面 7 个标识。</p>
<blockquote>
<ul>
<li>feat: New feature 新功能</li>
<li>fix: Fix bug 修补 bug</li>
<li>docs: Documentation 文档</li>
<li>style: Format 格式（不影响代码运行的变动）</li>
<li>refactor: Refactor 重构（即不是新增功能，也不是修改 bug 的代码变动）</li>
<li>test: Test 增加测试</li>
<li>chore: 构建过程或辅助工具的变动</li>
</ul>
</blockquote>
<p><strong>（2）scope</strong></p>
<p><code>scope</code> 用于说明 commit 影响的范围，比如 sns，lang，share。</p>
<p><code>scope</code> 紧接 <code>type</code> 置于 <code>()</code> 之内。</p>
<p><strong>（3）subject</strong></p>
<p><code>subject</code> 是 commit 目的的简短描述，不超过 50 个字符。</p>
<blockquote>
<ul>
<li>以动词开头，使用第一人称现在时，比如change，而不是changed或changes</li>
<li>第一个字母小写</li>
<li>结尾不加句号（.）</li>
</ul>
</blockquote>
<hr>
<p>Title 可参考 #119 <code>refactor(sns): simplify conditional display</code></p>
<h2 id="2-Body"><a href="#2-Body" class="headerlink" title="2. Body"></a>2. Body</h2><p>Body 部分是对本次 commit 的详细描述，可以分成多行。下面是一个范例。</p>
<blockquote>
<p>More detailed explanatory text, if necessary.  Wrap it to<br>about 72 characters or so.</p>
<p>Further paragraphs come after blank lines.</p>
<ul>
<li>Bullet points are okay, too</li>
<li>Use a hanging indent</li>
</ul>
</blockquote>
<p>有两个注意点：</p>
<p>（1）使用第一人称现在时，比如使用 <code>change</code> 而不是 <code>changed</code> 或 <code>changes</code>。</p>
<p>（2）应该说明代码变动的动机，以及与以前行为的对比。</p>
<h2 id="3-Footer"><a href="#3-Footer" class="headerlink" title="3. Footer"></a>3. Footer</h2><p>Footer 部分只用于两种情况。</p>
<p><strong>（1）不兼容变动</strong></p>
<p>如果当前代码与上一个版本不兼容，则 Footer 部分以 <code>BREAKING CHANGE</code> 开头，后面是对变动的描述、以及变动理由和迁移方法。</p>
<pre><code>BREAKING CHANGE: isolate scope bindings definition has changed.

To migrate the code follow the example below:

Before:

scope: {
    myAttr: &apos;attribute&apos;,
}

After:

scope: {
    myAttr: &apos;@&apos;,
}

The removed `inject` wasn&apos;t generally useful for directives so there should be no code using it.
</code></pre><p><strong>（2）关闭 Issue</strong></p>
<p>如果当前 commit 针对某个 issue，那么可以在 Footer 部分关闭这个 issue 。</p>
<pre><code>Closes #234
</code></pre><p>也可以一次关闭多个 issue 。</p>
<pre><code>Closes #123, #245, #992
</code></pre><h2 id="4-Revert"><a href="#4-Revert" class="headerlink" title="4. Revert"></a>4. Revert</h2><p>还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以 <code>revert:</code> 开头，后面跟着被撤销 Commit 的 Header。</p>
<pre><code>revert: feat(pencil): add &apos;graphiteWidth&apos; option

This reverts commit 667ecc1654a317a13331b17617d973392f415f02.
</code></pre><p>Body 部分的格式是固定的，必须写成 <code>This reverts commit &lt;hash&gt;.</code>，其中的 <code>hash</code> 是被撤销 commit 的 SHA 标识符。</p>
<p>如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change log 的 <code>Reverts</code> 小标题下面。</p>
